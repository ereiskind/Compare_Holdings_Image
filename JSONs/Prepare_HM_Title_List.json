[
    {
        "op": "core/column-rename",
        "oldColumnName": "ï»¿KBID",
        "newColumnName": "KBID",
        "description": "Rename column ``ï»¿KBID`` to ``KBID``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "﻿KBID",
        "newColumnName": "KBID",
        "description": "Rename column ``﻿KBID``, where the unknown character image doesn't appear in OpenRefine, to ``KBID``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "ManagedCoverageBegin",
        "newColumnName": "Default_Start_Date",
        "description": "Rename column ``ManagedCoverageBegin`` to ``Default_Start_Date``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "ManagedCoverageEnd",
        "newColumnName": "Default_End_Date",
        "description": "Rename column ``ManagedCoverageEnd`` to ``Default_End_Date``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "CustomCoverageBegin",
        "newColumnName": "Local_Start_Date",
        "description": "Rename column ``CustomCoverageBegin`` to ``Local_Start_Date``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "CustomCoverageEnd",
        "newColumnName": "Local_End_Date",
        "description": "Rename column ``CustomCoverageEnd`` to ``Local_End_Date``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "Embargo",
        "newColumnName": "Default_Embargo",
        "description": "Rename column ``Embargo`` to ``Default_Embargo``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "CustomEmbargo",
        "newColumnName": "Local_Embargo",
        "description": "Rename column ``CustomEmbargo`` to ``Local_Embargo``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "ResourceType",
        "newColumnName": "Resource_Type",
        "description": "Rename column ``ResourceType`` to ``Resource_Type``"
    },
    {
        "op": "core/column-rename",
        "oldColumnName": "AlternateTitle",
        "newColumnName": "All_Titles",
        "description": "Rename column ``AlternateTitle`` to ``All_Titles``"
    },
    {
        "op": "core/text-transform",
        "engineConfig": {
            "facets": [],
            "mode": "record-based"
        },
        "columnName": "All_Titles",
        "expression": "grel:if(value.split(\"|\").inArray(cells.Title.value),value,cells.Title.value+\"|\"+value)",
        "onError": "keep-original",
        "repeat": false,
        "repeatCount": 10,
        "description": "Add value in ``Title`` to ``All_Titles`` if not already there"
    },
    {
        "op": "core/text-transform",
        "engineConfig": {
            "facets": [],
            "mode": "row-based"
        },
        "columnName": "Default_Start_Date",
        "expression": "grel:if(value.contains(\"|\"),forEach(value.split(\"|\"),value,if(value==\"Present\",value,value.toDate())).join(\"|\"),if(value==\"Present\",value,value.toDate()))",
        "onError": "keep-original",
        "repeat": false,
        "repeatCount": 10,
        "description": "Text transform on cells in column ``Default_Start_Date`` to turn single date strings into date data types and format dates in multi-date entries as date data types"
    },
    {
        "op": "core/text-transform",
        "engineConfig": {
            "facets": [],
            "mode": "row-based"
        },
        "columnName": "Default_End_Date",
        "expression": "grel:if(value.contains(\"|\"),forEach(value.split(\"|\"),value,if(value==\"Present\",value,value.toDate())).join(\"|\"),if(value==\"Present\",value,value.toDate()))",
        "onError": "keep-original",
        "repeat": false,
        "repeatCount": 10,
        "description": "Text transform on cells in column ``Default_End_Date`` to turn single date strings into date data types and format dates in multi-date entries as date data types"
    },
    {
        "op": "core/text-transform",
        "engineConfig": {
            "facets": [],
            "mode": "row-based"
        },
        "columnName": "Local_Start_Date",
        "expression": "grel:if(value.contains(\"|\"),forEach(value.split(\"|\"),value,if(value==\"Present\",value,value.toDate())).join(\"|\"),if(value==\"Present\",value,value.toDate()))",
        "onError": "keep-original",
        "repeat": false,
        "repeatCount": 10,
        "description": "Text transform on cells in column ``Local_Start_Date`` to turn single date strings into date data types and format dates in multi-date entries as date data types"
    },
    {
        "op": "core/text-transform",
        "engineConfig": {
            "facets": [],
            "mode": "row-based"
        },
        "columnName": "Local_End_Date",
        "expression": "grel:if(value.contains(\"|\"),forEach(value.split(\"|\"),value,if(value==\"Present\",value,value.toDate())).join(\"|\"),if(value==\"Present\",value,value.toDate()))",
        "onError": "keep-original",
        "repeat": false,
        "repeatCount": 10,
        "description": "Text transform on cells in column ``Local_End_Date`` to turn single date strings into date data types and format dates in multi-date entries as date data types"
    },
    {
        "op": "core/column-reorder",
        "columnNames": [
            "KBID",
            "PrintISSN",
            "OnlineISSN",
            "Title",
            "All_Titles",
            "PackageName",
            "URL",
            "DOI",
            "Publisher",
            "Default_Start_Date",
            "Default_End_Date",
            "Local_Start_Date",
            "Local_End_Date",
            "Default_Embargo",
            "Local_Embargo",
            "Resource_Type"
        ],
        "description": "Reorder columns, removing unneeded columns"
    },
    {
        "op": "core/transpose-columns-into-rows",
        "combinedColumnName": "ISSN",
        "startColumnName": "PrintISSN",
        "columnCount": 2,
        "ignoreBlankCells": true,
        "fillDown": false,
        "prependColumnName": false,
        "separator": ":",
        "keyColumnName": null,
        "valueColumnName": null,
        "description": "Transpose all ISSN values into one new column named ``ISSN``"
    },
    {
        "op": "core/fill-down",
        "engineConfig": {
            "facets": [],
            "mode": "record-based"
        },
        "columnName": "KBID",
        "description": "Fill down cells in column ``KBID``"
    }
]